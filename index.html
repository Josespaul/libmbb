<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>libmbb - Embedded Building Bricks
</title>
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootswatch/3.3.2/cosmo/bootstrap.min.css">
<style>
body {
	padding-top: 20px;
	padding-bottom: 20px;
}
@media (min-width: 768px) {
	.container {
		max-width: 730px;
	}
}
</style>
</head>
<body>
<div class="container">
<p><img style="display: block; margin: auto;" src="docs/mbb.png" alt"Logo libmbb"/></p>

<h1>libmbb - Embedded Building Bricks</h1>

<h2>Synopsis</h2>

<p><em>libmbb</em> is a <a href="LICENSE.txt">MIT-licensed</a> C library targeted at embedded
systems.</p>

<p>The upstream repository is at <a href="https://github.com/jawebada/libmbb/">https://github.com/jawebada/libmbb/</a>.</p>

<h2>Features</h2>

<ul>
<li><a href="docs/HSM.html">Hierarchical state machines (HSMs)</a>, including timers</li>
<li><a href="docs/Queue.html">Fixed-cacpacity queues</a></li>
<li><a href="docs/Debug.html">Debugging macros</a></li>
<li><a href="docs/Test.html">Unit tests</a></li>
</ul>

<p><em>libmbb</em> does not allocate memory dynamically. It is up to the developer to
decide how memory is allocated. The HSM module supports both purely
event-driven and non-blocking, real-time suitable processing.</p>

<h2>Tools</h2>

<p>The tools sub directory contains the following command line tools:</p>

<ul>
<li><code>mhsm_scaffold</code> adds event processing function stubs to source files</li>
<li><code>munt_main</code> generates main functions for unit tests</li>
</ul>

<h2>Building</h2>

<p><em>libmbb</em> uses the autotools for building. To build the <code>configure</code> script you
will need autoconf and automake installed. Running <code>./autogen.sh</code> should build
the <code>configure</code> script. After that it is the usual game of</p>

<pre><code>./configure
make
make install
</code></pre>

<p>The <code>install</code> target will install the examples and unit tests along with libmbb
itself. These programs have rather unspecific names like <code>test_hsm</code>. Calling
<code>./configure --program-prefix=mbb_</code> will install them as <code>mbb_test_hsm</code>
instead. Alternatively, you might specify <code>./configure --prefix=/opt/mbb</code> to
install everything into <code>/opt/mbb</code>.</p>

<p>Call <code>make check</code> to run the unit tests.</p>

<p>Call <code>./configure --host=arm-linux</code> to cross-compile for arm-linux.</p>

<p>Call <code>./configure --help</code> for a general help message.</p>

<h2>Dependencies</h2>

<ul>
<li>The <a href="http://software.schmorp.de/pkg/libev.html">libev</a> timers backend and the
examples using it are only compiled if <code>libev</code> and its header files are
installed on your system.</li>
<li>The tools are written in and thus depend on
<a href="https://www.ruby-lang.org/">Ruby</a>.</li>
</ul>

<h2>Examples</h2>

<ul>
<li><a href="examples/debugging.c">debugging</a>: debugging macros</li>
<li><a href="examples/monostable.c">monostable</a>: multiple HSM instances, libev timers</li>
<li><a href="examples/pelican.c">pelican</a>: <a href="http://www.state-machine.com/">Miro Samek&#39;s</a>
<a href="http://www.state-machine.com/resources/AN_PELICAN.pdf">PEdestrian LIght CONtrolled (PELICAN) Crossing
Example</a>, periodic
timers</li>
</ul>

<p>Note that the terminal interfaces of some of the examples (<code>pelican</code> and
<code>monostable</code>) will be interfered with by the <code>stderr</code> output of the debugging
macros. You can either add <code>-DNDEBUG</code> to <code>CPPFLAGS</code> to disable these debugging
macros or redirect <code>stderr</code> like this:</p>

<pre><code>examples/pelican 2&gt; log 
</code></pre>

<p class="text-muted text-center" style="margin-top: 40px;">
This website was rendered automatically from <em>libmbb</em>'s Markdown documentation.
</p>
</div>
</body>
</html>
